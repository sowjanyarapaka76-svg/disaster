<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disaster Preparedness Education System</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
    <!-- Sign Up Screen -->
    <div id="signupScreen" class="screen hidden">
    <h1 data-i18n="signup">Sign Up</h1>
        <input type="text" id="newUsername" placeholder="Choose Username" data-i18n-placeholder="chooseUsername">
        <input type="password" id="newPassword" placeholder="Choose Password" data-i18n-placeholder="choosePassword">
    <button onclick="signup()" data-i18n="signup">Create Account</button>
    <p data-i18n="alreadyAccount">Already have an account? <a href="#" onclick="showLogin()" data-i18n="login">Sign In</a></p>
    </div>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen">
    <h1 data-i18n="login">Disaster Prep Login</h1>
        <input type="text" id="username" placeholder="Username (e.g., student)" data-i18n-placeholder="usernamePlaceholder">
        <input type="password" id="password" placeholder="Password" data-i18n-placeholder="passwordPlaceholder">
    <button onclick="login()" data-i18n="login">Login</button>
    <p data-i18n="noAccount">Don't have an account? <a href="#" onclick="showSignup()" data-i18n="signup">Sign Up</a></p>
        <p>Demo: student / pass123</p>
        <div id="errorMessage" class="error-message hidden">
            <span class="error-icon">&#9888;</span>
            <span id="errorText">Sorry, please enter valid credentials!</span>
        </div>
    </div>
    <!-- Main Dashboard -->
    <div id="dashboard" class="screen hidden">
        <nav>
            <button onclick="showSection('home')" data-i18n="home">Home</button>
            <button onclick="showSection('emergency')" data-i18n="emergency">Emergency Contacts</button>
            <button onclick="showSection('quizzes')" data-i18n="quizzes">Quizzes</button>
            <button onclick="showSection('games')" data-i18n="games">Games (Class Level)</button>
            <button onclick="showSection('hackathon')" data-i18n="hackathon">Hackathon Mode (6-10)</button>
            <button onclick="showSection('advanced')" data-i18n="advanced">Advanced Simulation (11-12)</button>
            <button onclick="showSection('videos')" data-i18n="videos">YouTube Videos</button>
            <button onclick="logout()" data-i18n="logout">Logout</button>
            <button onclick="toggleVoice()" data-i18n="voice">Voice Guide</button>
        </nav>

        <!-- Language Selection -->
        <div id="languageSelectContainer">
            <label for="languageSelect">Select Language:</label>
            <select id="languageSelect" onchange="setLanguage(this.value)">
                <option value="en">English</option>
                <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
                <option value="es">Espa√±ol</option>
                <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
            </select>
        </div>

        <!-- Home Section -->
        <section id="home" class="section">
            <div class="home-hero">
                <div class="home-hero-bg"></div>
                <div class="home-hero-content">
                    <h2><span class="emoji">üõ°Ô∏è</span> <span data-i18n="welcome">Welcome to Disaster Prep Portal</span> <span class="emoji">üåç</span></h2>
                    <p>
                        <span class="highlight">üåè <span data-i18n="region">Region:</span></span>
                        <b data-i18n="punjab">Punjab</b>
                        <span class="badge-disaster" data-i18n="zone">Flood & Earthquake Zone</span>
                        <br>
                        <span class="home-motivate">
                            <span class="emoji">üö®</span>
                            <b data-i18n="hero">Are you ready to become a Disaster Hero?</b>
                            <span class="emoji">ü¶∏‚Äç‚ôÇÔ∏èü¶∏‚Äç‚ôÄÔ∏è</span>
                            <br>
                            <span style="color:#36d1c4;font-weight:600;" data-i18n="learn">Learn, Play, and Prepare to Stay Safe!</span>
                        </span>
                    </p>
                    <div class="home-actions">
                        <button onclick="showSection('quizzes')" class="home-btn" data-i18n="takeQuiz">üìù Take a Quiz</button>
                        <button onclick="showSection('games')" class="home-btn" data-i18n="playGame">üéÆ Play a Game</button>
                        <button onclick="showSection('advanced')" class="home-btn" data-i18n="trySimulation">üó∫Ô∏è Try Simulation</button>
                    </div>
                </div>
            </div>
            <div id="progressBar">
                <span data-i18n="progress">Progress:</span> <span id="progress">0%</span>
                <div id="progressFill"></div>
            </div>
            <div id="badges"><span data-i18n="badges">Badges:</span> <span id="badgeList"></span></div>
            <div class="home-news" id="homeNews" data-i18n="leaderboard">Leaderboard</div>
        </section>

        <!-- Emergency Contacts -->
        <section id="emergency" class="section hidden">
            <h2 data-i18n="emergency">Emergency Contacts (Punjab)</h2>
            <ul>
                <li data-i18n="ndmaHelpline">NDMA Helpline: 011-26701700</li>
                <li data-i18n="punjabDisaster">Punjab Disaster Mgmt: 0172-2740271</li>
                <li data-i18n="firePoliceMedical">Fire: 101 | Police: 100 | Medical: 108</li>
                <li data-i18n="schoolCoordinator">Local School Drill Coordinator: Contact Admin</li>
            </ul>
            <button onclick="shareContacts()" data-i18n="shareParents">Share with Parents</button>
        </section>

        <!-- Quizzes -->
        <section id="quizzes" class="section hidden">
            <h2 data-i18n="quizzes">Disaster Quizzes</h2>
            <div id="quizContent"></div>
        </section>

        <!-- Games for Classes 1-5 -->
        <section id="games" class="section hidden">
            <h2 data-i18n="games">Games for Classes 1-5 (Drag & Drop)</h2>
            <select id="classLevel">
                <option value="1" data-i18n="class1">Class 1</option>
                <option value="2" data-i18n="class2">Class 2</option>
                <option value="3" data-i18n="class3">Class 3</option>
                <option value="4" data-i18n="class4">Class 4</option>
                <option value="5" data-i18n="class5">Class 5</option>
            </select>
            <button onclick="startGame()" data-i18n="startGame">Start Game</button>
            <div id="gameArea"></div>
            <div id="gameScore" data-i18n="score">Score: 0</div>
            <div id="levelProgress" data-i18n="level">Level: 1/5</div>
        </section>

        <!-- Hackathon Mode Game (Classes 6-10) -->
        <section id="hackathon" class="section hidden">
            <h2 data-i18n="hackathon">Hackathon Mode Game (Classes 6-10)</h2>
            <p>
                <span data-i18n="hackathonWelcome">Welcome to Hackathon Mode! Solve disaster scenarios by making quick decisions.</span><br>
                <b data-i18n="selectClass">Select your class:</b>
                <select id="hackathonClass">
                    <option value="6" data-i18n="class6">Class 6</option>
                    <option value="7" data-i18n="class7">Class 7</option>
                    <option value="8" data-i18n="class8">Class 8</option>
                    <option value="9" data-i18n="class9">Class 9</option>
                    <option value="10" data-i18n="class10">Class 10</option>
                </select>
                <button onclick="startHackathonGame()" data-i18n="startHackathon">Start Hackathon Game</button>
            </p>
            <div id="hackathonGameArea"></div>
            <div id="hackathonScore" data-i18n="score">Score: 0</div>
        </section>

        <!-- Advanced Simulation for 11-12 -->
        <section id="advanced" class="section hidden">
            <div class="sim-card">
                <div class="sim-icon">üåä</div>
                <h2 data-i18n="advanced">Real-Time Location-Based Simulation</h2>
                <p id="simQuestion"></p>
                <button class="sim-btn" onclick="startAdvancedSimulation()" data-i18n="startSimulation">üö¶ Start Simulation</button>
                <div id="simFeedback" class="sim-feedback"></div>
                <div id="realMap" class="sim-map"></div>
                <div id="safePlaces" class="sim-safe"></div>
            </div>
        </section>

        <!-- YouTube Learning Videos Section -->
        <section id="videos" class="section hidden">
            <h2 data-i18n="videos">Disaster Safety: Watch & Learn</h2>
            <div class="video-grid" id="videoGrid"></div>
            <div id="videoPlayer" class="video-player"></div>
        </section>
    </div>
    <script src="script.js"></script>
    <script>
        // --- MULTI-LANGUAGE SUPPORT ---
        const translations = {
            en: {
                home: "Welcome to Disaster Prep Portal",
                emergency: "Emergency Contacts (Punjab)",
                quizzes: "Disaster Quizzes",
                games: "Games for Classes 1-5 (Drag & Drop)",
                hackathon: "Hackathon Mode Game (Classes 6-10)",
                advanced: "Real-Time Location-Based Simulation",
                videos: "Disaster Safety: Watch & Learn",
                login: "Disaster Prep Login",
                signup: "Sign Up",
                logout: "Logout",
                voice: "Voice Guide",
                selectClass: "Select your class:",
                startGame: "Start Game",
                startHackathon: "Start Hackathon Game",
                startSimulation: "Start Simulation",
                shareContacts: "Share with Parents",
                badges: "Badges",
                progress: "Progress",
                region: "Region",
                floodZone: "Flood & Earthquake Zone",
                hero: "Are you ready to become a Disaster Hero?",
                learnPlay: "Learn, Play, and Prepare to Stay Safe!",
                // Quiz questions
                quizQuestions: [
                    { q: "What to do in earthquake?", a: "Drop, Cover, Hold On", options: ["Run", "Drop, Cover, Hold On", "Hide under bed"] },
                    { q: "What number do you call for fire emergency?", a: "101", options: ["100", "101", "108"] },
                    { q: "What should you do during a flood?", a: "Move to higher ground", options: ["Swim in water", "Move to higher ground", "Stay in basement"] },
                    { q: "What is the safest place during a thunderstorm?", a: "Indoors away from windows", options: ["Under a tree", "Indoors away from windows", "On the roof"] },
                    { q: "What to do if you smell gas?", a: "Open windows and leave", options: ["Light a match", "Open windows and leave", "Ignore it"] }
                ]
            },
            hi: {
                home: "‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à Disaster Prep Portal ‡§Æ‡•á‡§Ç",
                emergency: "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï (‡§™‡§Ç‡§ú‡§æ‡§¨)",
                quizzes: "‡§Ü‡§™‡§¶‡§æ ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º",
                games: "‡§ï‡§ï‡•ç‡§∑‡§æ 1-5 ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ñ‡•á‡§≤ (‡§°‡•ç‡§∞‡•à‡§ó ‡§è‡§Ç‡§° ‡§°‡•ç‡§∞‡•â‡§™)",
                hackathon: "‡§π‡•à‡§ï‡§•‡•â‡§® ‡§Æ‡•ã‡§° ‡§ó‡•á‡§Æ (‡§ï‡§ï‡•ç‡§∑‡§æ 6-10)",
                advanced: "‡§∞‡•Ä‡§Ø‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§®",
                videos: "‡§Ü‡§™‡§¶‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ: ‡§¶‡•á‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§∏‡•Ä‡§ñ‡•á‡§Ç",
                login: "‡§°‡§ø‡§ú‡§æ‡§∏‡•ç‡§ü‡§∞ ‡§™‡•ç‡§∞‡•á‡§™ ‡§≤‡•â‡§ó‡§ø‡§®",
                signup: "‡§∏‡§æ‡§á‡§® ‡§Ö‡§™",
                logout: "‡§≤‡•â‡§ó‡§Ü‡§â‡§ü",
                voice: "‡§µ‡•â‡§Ø‡§∏ ‡§ó‡§æ‡§á‡§°",
                selectClass: "‡§Ö‡§™‡§®‡•Ä ‡§ï‡§ï‡•ç‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç:",
                startGame: "‡§ñ‡•á‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç",
                startHackathon: "‡§π‡•à‡§ï‡§•‡•â‡§® ‡§ó‡•á‡§Æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç",
                startSimulation: "‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç",
                shareContacts: "‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç",
                badges: "‡§¨‡•à‡§ú",
                progress: "‡§™‡•ç‡§∞‡§ó‡§§‡§ø",
                region: "‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞",
                floodZone: "‡§¨‡§æ‡§¢‡§º ‡§î‡§∞ ‡§≠‡•Ç‡§ï‡§Ç‡§™ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞",
                hero: "‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§Ü‡§™‡§¶‡§æ ‡§π‡•Ä‡§∞‡•ã ‡§¨‡§®‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à‡§Ç?",
                learnPlay: "‡§∏‡•Ä‡§ñ‡•á‡§Ç, ‡§ñ‡•á‡§≤‡•á‡§Ç, ‡§î‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§π‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§∞‡§π‡•á‡§Ç!",
                quizQuestions: [
                    { q: "‡§≠‡•Ç‡§ï‡§Ç‡§™ ‡§Æ‡•á‡§Ç ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è?", a: "‡§®‡•Ä‡§ö‡•á ‡§ù‡•Å‡§ï‡•á‡§Ç, ‡§¢‡§ï‡•á‡§Ç, ‡§™‡§ï‡§°‡§º‡•á‡§Ç", options: ["‡§≠‡§æ‡§ó‡•á‡§Ç", "‡§®‡•Ä‡§ö‡•á ‡§ù‡•Å‡§ï‡•á‡§Ç, ‡§¢‡§ï‡•á‡§Ç, ‡§™‡§ï‡§°‡§º‡•á‡§Ç", "‡§¨‡§ø‡§∏‡•ç‡§§‡§∞ ‡§ï‡•á ‡§®‡•Ä‡§ö‡•á ‡§õ‡•Å‡§™‡•á‡§Ç"] },
                    { q: "‡§Ü‡§ó ‡§ï‡•Ä ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§∏‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§Ø‡§≤ ‡§ï‡§∞‡•á‡§Ç?", a: "101", options: ["100", "101", "108"] },
                    { q: "‡§¨‡§æ‡§¢‡§º ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è?", a: "‡§ä‡§Å‡§ö‡•Ä ‡§ú‡§ó‡§π ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç", options: ["‡§™‡§æ‡§®‡•Ä ‡§Æ‡•á‡§Ç ‡§§‡•à‡§∞‡•á‡§Ç", "‡§ä‡§Å‡§ö‡•Ä ‡§ú‡§ó‡§π ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç", "‡§§‡§≤‡§ò‡§∞ ‡§Æ‡•á‡§Ç ‡§∞‡§π‡•á‡§Ç"] },
                    { q: "‡§¨‡§ø‡§ú‡§≤‡•Ä ‡§ó‡§ø‡§∞‡§®‡•á ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§® ‡§∏‡§¨‡§∏‡•á ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?", a: "‡§ñ‡§ø‡§°‡§º‡§ï‡§ø‡§Ø‡•ã‡§Ç ‡§∏‡•á ‡§¶‡•Ç‡§∞ ‡§Ö‡§Ç‡§¶‡§∞", options: ["‡§™‡•á‡§°‡§º ‡§ï‡•á ‡§®‡•Ä‡§ö‡•á", "‡§ñ‡§ø‡§°‡§º‡§ï‡§ø‡§Ø‡•ã‡§Ç ‡§∏‡•á ‡§¶‡•Ç‡§∞ ‡§Ö‡§Ç‡§¶‡§∞", "‡§õ‡§§ ‡§™‡§∞"] },
                    { q: "‡§Ö‡§ó‡§∞ ‡§ó‡•à‡§∏ ‡§ï‡•Ä ‡§ó‡§Ç‡§ß ‡§Ü‡§è ‡§§‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç?", a: "‡§ñ‡§ø‡§°‡§º‡§ï‡§ø‡§Ø‡§æ‡§Å ‡§ñ‡•ã‡§≤‡•á‡§Ç ‡§î‡§∞ ‡§¨‡§æ‡§π‡§∞ ‡§ú‡§æ‡§è‡§Ç", options: ["‡§Æ‡§æ‡§ö‡§ø‡§∏ ‡§ú‡§≤‡§æ‡§è‡§Ç", "‡§ñ‡§ø‡§°‡§º‡§ï‡§ø‡§Ø‡§æ‡§Å ‡§ñ‡•ã‡§≤‡•á‡§Ç ‡§î‡§∞ ‡§¨‡§æ‡§π‡§∞ ‡§ú‡§æ‡§è‡§Ç", "‡§®‡§ú‡§º‡§∞‡§Ö‡§Ç‡§¶‡§æ‡§ú‡§º ‡§ï‡§∞‡•á‡§Ç"] }
                ]
            },
            mr: {
                home: "Disaster Prep Portal ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§Ü‡§π‡•á",
                emergency: "‡§Ü‡§™‡§§‡•ç‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï (‡§™‡§Ç‡§ú‡§æ‡§¨)",
                quizzes: "‡§Ü‡§™‡§§‡•ç‡§§‡•Ä ‡§ï‡•ç‡§µ‡§ø‡§ù",
                games: "‡§á‡§Ø‡§§‡•ç‡§§‡§æ 1-5 ‡§∏‡§æ‡§†‡•Ä ‡§ñ‡•á‡§≥ (‡§°‡•ç‡§∞‡•Ö‡§ó ‡§Ü‡§£‡§ø ‡§°‡•ç‡§∞‡•â‡§™)",
                hackathon: "‡§π‡•Ö‡§ï‡§•‡•â‡§® ‡§Æ‡•ã‡§° ‡§ó‡•á‡§Æ (‡§á‡§Ø‡§§‡•ç‡§§‡§æ 6-10)",
                advanced: "‡§∞‡§ø‡§Ö‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡§ø‡§Æ‡•ç‡§Ø‡•Å‡§≤‡•á‡§∂‡§®",
                videos: "‡§Ü‡§™‡§§‡•ç‡§§‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ: ‡§™‡§π‡§æ ‡§Ü‡§£‡§ø ‡§∂‡§ø‡§ï‡§æ",
                login: "‡§°‡§ø‡§ù‡§æ‡§∏‡•ç‡§ü‡§∞ ‡§™‡•ç‡§∞‡•á‡§™ ‡§≤‡•â‡§ó‡§ø‡§®",
                signup: "‡§∏‡§æ‡§á‡§® ‡§Ö‡§™",
                logout: "‡§≤‡•â‡§ó‡§Ü‡§â‡§ü",
                voice: "‡§µ‡•ç‡§π‡•â‡§á‡§∏ ‡§ó‡§æ‡§á‡§°",
                selectClass: "‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§á‡§Ø‡§§‡•ç‡§§‡§æ ‡§®‡§ø‡§µ‡§°‡§æ:",
                startGame: "‡§ñ‡•á‡§≥ ‡§∏‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§æ",
                startHackathon: "‡§π‡•Ö‡§ï‡§•‡•â‡§® ‡§ó‡•á‡§Æ ‡§∏‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§æ",
                startSimulation: "‡§∏‡§ø‡§Æ‡•ç‡§Ø‡•Å‡§≤‡•á‡§∂‡§® ‡§∏‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§æ",
                shareContacts: "‡§™‡§æ‡§≤‡§ï‡§æ‡§Ç‡§∏‡•ã‡§¨‡§§ ‡§∂‡•á‡§Ö‡§∞ ‡§ï‡§∞‡§æ",
                badges: "‡§¨‡•Ö‡§ú‡•á‡§∏",
                progress: "‡§™‡•ç‡§∞‡§ó‡§§‡•Ä",
                region: "‡§™‡•ç‡§∞‡§¶‡•á‡§∂",
                floodZone: "‡§™‡•Ç‡§∞ ‡§Ü‡§£‡§ø ‡§≠‡•Ç‡§ï‡§Ç‡§™ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞",
                hero: "‡§Ü‡§™‡§£ ‡§Ü‡§™‡§§‡•ç‡§§‡•Ä ‡§®‡§æ‡§Ø‡§ï ‡§π‡•ã‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§§‡§Ø‡§æ‡§∞ ‡§Ü‡§π‡§æ‡§§ ‡§ï‡§æ?",
                learnPlay: "‡§∂‡§ø‡§ï‡§æ, ‡§ñ‡•á‡§≥‡§æ, ‡§Ü‡§£‡§ø ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§æ‡§π‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§§‡§Ø‡§æ‡§∞ ‡§µ‡•ç‡§π‡§æ!",
                quizQuestions: [
                    { q: "‡§≠‡•Ç‡§ï‡§Ç‡§™‡§æ‡§§ ‡§ï‡§æ‡§Ø ‡§ï‡§∞‡§æ‡§µ‡•á?", a: "‡§ù‡•Å‡§ï‡•Ç‡§®, ‡§ù‡§æ‡§ï‡•Ç‡§®, ‡§ß‡§∞‡•Ç‡§® ‡§†‡•á‡§µ‡§æ", options: ["‡§™‡§≥‡§æ", "‡§ù‡•Å‡§ï‡•Ç‡§®, ‡§ù‡§æ‡§ï‡•Ç‡§®, ‡§ß‡§∞‡•Ç‡§® ‡§†‡•á‡§µ‡§æ", "‡§™‡§≤‡§Ç‡§ó‡§æ‡§ñ‡§æ‡§≤‡•Ä ‡§≤‡§™‡§µ‡§æ"] },
                    { q: "‡§Ü‡§ó‡•Ä‡§ö‡•ç‡§Ø‡§æ ‡§Ü‡§™‡§§‡•ç‡§ï‡§æ‡§≤‡•Ä‡§® ‡§™‡§∞‡§ø‡§∏‡•ç‡§•‡§ø‡§§‡•Ä‡§§ ‡§ï‡•ã‡§£‡§§‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§Ø‡§≤ ‡§ï‡§∞‡§æ‡§µ‡§æ?", a: "101", options: ["100", "101", "108"] },
                    { q: "‡§™‡•Ç‡§∞ ‡§Ø‡•á‡§§‡§æ‡§®‡§æ ‡§ï‡§æ‡§Ø ‡§ï‡§∞‡§æ‡§µ‡•á?", a: "‡§â‡§Ç‡§ö ‡§ú‡§æ‡§ó‡•Ä ‡§ú‡§æ", options: ["‡§™‡§æ‡§£‡•ç‡§Ø‡§æ‡§§ ‡§™‡•ã‡§π‡§æ", "‡§â‡§Ç‡§ö ‡§ú‡§æ‡§ó‡•Ä ‡§ú‡§æ", "‡§§‡§≥‡§ò‡§∞‡§æ‡§§ ‡§∞‡§π‡§æ"] },
                    { q: "‡§µ‡§æ‡§¶‡§≥‡•Ä ‡§™‡§æ‡§µ‡§∏‡§æ‡§§ ‡§∏‡§∞‡•ç‡§µ‡§æ‡§§ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ú‡§æ‡§ó‡§æ ‡§ï‡•ã‡§£‡§§‡•Ä?", a: "‡§ñ‡§ø‡§°‡§ï‡•ç‡§Ø‡§æ‡§Ç‡§™‡§æ‡§∏‡•Ç‡§® ‡§¶‡•Ç‡§∞ ‡§ò‡§∞‡§æ‡§§", options: ["‡§ù‡§æ‡§°‡§æ‡§ñ‡§æ‡§≤‡•Ä", "‡§ñ‡§ø‡§°‡§ï‡•ç‡§Ø‡§æ‡§Ç‡§™‡§æ‡§∏‡•Ç‡§® ‡§¶‡•Ç‡§∞ ‡§ò‡§∞‡§æ‡§§", "‡§õ‡§§‡§æ‡§µ‡§∞"] },
                    { q: "‡§ó‡•Ö‡§∏‡§ö‡§æ ‡§µ‡§æ‡§∏ ‡§Ü‡§≤‡§æ ‡§§‡§∞ ‡§ï‡§æ‡§Ø ‡§ï‡§∞‡§æ‡§µ‡•á?", a: "‡§ñ‡§ø‡§°‡§ï‡•ç‡§Ø‡§æ ‡§â‡§ò‡§°‡§æ ‡§Ü‡§£‡§ø ‡§¨‡§æ‡§π‡•á‡§∞ ‡§ú‡§æ", options: ["‡§Æ‡§æ‡§ö‡§ø‡§∏ ‡§™‡•á‡§ü‡§µ‡§æ", "‡§ñ‡§ø‡§°‡§ï‡•ç‡§Ø‡§æ ‡§â‡§ò‡§°‡§æ ‡§Ü‡§£‡§ø ‡§¨‡§æ‡§π‡•á‡§∞ ‡§ú‡§æ", "‡§¶‡•Å‡§∞‡•ç‡§≤‡§ï‡•ç‡§∑ ‡§ï‡§∞‡§æ"] }
                ]
            },
            es: {
                home: "Bienvenido al Portal de Preparaci√≥n para Desastres",
                emergency: "Contactos de emergencia (Punjab)",
                quizzes: "Cuestionarios de desastres",
                games: "Juegos para clases 1-5 (Arrastrar y soltar)",
                hackathon: "Modo Hackathon (Clases 6-10)",
                advanced: "Simulaci√≥n basada en ubicaci√≥n en tiempo real",
                videos: "Seguridad ante desastres: Mira y aprende",
                login: "Inicio de sesi√≥n de preparaci√≥n para desastres",
                signup: "Registrarse",
                logout: "Cerrar sesi√≥n",
                voice: "Gu√≠a de voz",
                selectClass: "Selecciona tu clase:",
                startGame: "Iniciar juego",
                startHackathon: "Iniciar Hackathon",
                startSimulation: "Iniciar simulaci√≥n",
                shareContacts: "Compartir con padres",
                badges: "Insignias",
                progress: "Progreso",
                region: "Regi√≥n",
                floodZone: "Zona de inundaci√≥n y terremoto",
                hero: "¬øEst√°s listo para convertirte en un h√©roe de desastres?",
                learnPlay: "¬°Aprende, juega y prep√°rate para estar seguro!",
                quizQuestions: [
                    { q: "¬øQu√© hacer en un terremoto?", a: "Agacharse, cubrirse, sujetarse", options: ["Correr", "Agacharse, cubrirse, sujetarse", "Esconderse bajo la cama"] },
                    { q: "¬øQu√© n√∫mero llamar en caso de incendio?", a: "101", options: ["100", "101", "108"] },
                    { q: "¬øQu√© hacer durante una inundaci√≥n?", a: "Ir a un lugar m√°s alto", options: ["Nadar en el agua", "Ir a un lugar m√°s alto", "Quedarse en el s√≥tano"] },
                    { q: "¬øCu√°l es el lugar m√°s seguro durante una tormenta el√©ctrica?", a: "Dentro lejos de ventanas", options: ["Bajo un √°rbol", "Dentro lejos de ventanas", "En el techo"] },
                    { q: "¬øQu√© hacer si hueles gas?", a: "Abrir ventanas y salir", options: ["Encender un f√≥sforo", "Abrir ventanas y salir", "Ignorarlo"] }
                ]
            },
            te: {
                home: "Disaster Prep Portal ‡∞ï‡∞ø ‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç",
                emergency: "‡∞Ö‡∞§‡±ç‡∞Ø‡∞µ‡∞∏‡∞∞ ‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞ø‡∞Ç‡∞™‡±Å‡∞≤‡±Å (Punjab)",
                quizzes: "‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞æ‡∞≤ ‡∞ï‡±ç‡∞µ‡∞ø‡∞ú‡±ç‚Äå‡∞≤‡±Å",
                games: "‡∞§‡∞∞‡∞ó‡∞§‡∞ø 1-5 ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞Ü‡∞ü‡∞≤‡±Å (‡∞°‡±ç‡∞∞‡∞æ‡∞ó‡±ç & ‡∞°‡±ç‡∞∞‡∞æ‡∞™‡±ç)",
                hackathon: "‡∞π‡∞æ‡∞ï‡∞•‡∞æ‡∞®‡±ç ‡∞Æ‡±ã‡∞°‡±ç ‡∞ó‡±á‡∞Æ‡±ç (‡∞§‡∞∞‡∞ó‡∞§‡∞ø 6-10)",
                advanced: "‡∞∞‡∞ø‡∞Ø‡∞≤‡±ç-‡∞ü‡±à‡∞Æ‡±ç ‡∞∏‡±ç‡∞•‡∞æ‡∞® ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞ø‡∞§ ‡∞Ö‡∞®‡±Å‡∞ï‡∞∞‡∞£",
                videos: "‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶ ‡∞≠‡∞¶‡±ç‡∞∞‡∞§: ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞®‡±á‡∞∞‡±ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø",
                login: "Disaster Prep ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç",
                signup: "‡∞∏‡±à‡∞®‡±ç ‡∞Ö‡∞™‡±ç",
                logout: "‡∞≤‡∞æ‡∞ó‡±ç ‡∞Ö‡∞µ‡±Å‡∞ü‡±ç",
                voice: "‡∞µ‡∞æ‡∞Ø‡∞ø‡∞∏‡±ç ‡∞ó‡±à‡∞°‡±ç",
                selectClass: "‡∞Æ‡±Ä ‡∞§‡∞∞‡∞ó‡∞§‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø:",
                startGame: "‡∞Ü‡∞ü ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                startHackathon: "‡∞π‡∞æ‡∞ï‡∞•‡∞æ‡∞®‡±ç ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                startSimulation: "‡∞Ö‡∞®‡±Å‡∞ï‡∞∞‡∞£ ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                shareContacts: "‡∞§‡∞≤‡±ç‡∞≤‡∞ø‡∞¶‡∞Ç‡∞°‡±ç‡∞∞‡±Å‡∞≤‡∞§‡±ã ‡∞™‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø",
                badges: "‡∞¨‡∞æ‡∞°‡±ç‡∞ú‡±Ä‡∞≤‡±Å",
                progress: "‡∞™‡±ç‡∞∞‡∞ó‡∞§‡∞ø",
                region: "‡∞™‡±ç‡∞∞‡∞æ‡∞Ç‡∞§‡∞Ç",
                floodZone: "‡∞™‡±ç‡∞∞‡∞≥‡∞Ø‡∞Ç & ‡∞≠‡±Ç‡∞ï‡∞Ç‡∞™‡∞Ç ‡∞™‡±ç‡∞∞‡∞æ‡∞Ç‡∞§‡∞Ç",
                hero: "‡∞Æ‡±Ä‡∞∞‡±Å ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶ ‡∞π‡±Ä‡∞∞‡±ã‡∞ó‡∞æ ‡∞Æ‡∞æ‡∞∞‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡∞ø‡∞¶‡±ç‡∞ß‡∞Ç‡∞ó‡∞æ ‡∞â‡∞®‡±ç‡∞®‡∞æ‡∞∞‡∞æ?",
                learnPlay: "‡∞®‡±Ü‡∞∞‡±ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø, ‡∞Ü‡∞°‡∞Ç‡∞°‡∞ø, ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∏‡±Å‡∞∞‡∞ï‡±ç‡∞∑‡∞ø‡∞§‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞°‡∞ü‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡∞ø‡∞¶‡±ç‡∞ß‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞°‡∞Ç‡∞°‡∞ø!",
                quizQuestions: [
                    { q: "‡∞≠‡±Ç‡∞ï‡∞Ç‡∞™‡∞Ç ‡∞µ‡∞ö‡±ç‡∞ö‡∞ø‡∞®‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞è‡∞Æ‡∞ø ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞ø?", a: "‡∞µ‡∞Ç‡∞ó‡∞ø, ‡∞ï‡∞™‡±ç‡∞™‡∞ø, ‡∞™‡∞ü‡±ç‡∞ü‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø", options: ["‡∞™‡∞∞‡∞ø‡∞ó‡±Ü‡∞§‡±ç‡∞§‡∞Ç‡∞°‡∞ø", "‡∞µ‡∞Ç‡∞ó‡∞ø, ‡∞ï‡∞™‡±ç‡∞™‡∞ø, ‡∞™‡∞ü‡±ç‡∞ü‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø", "‡∞™‡∞°‡∞ï ‡∞ï‡∞ø‡∞Ç‡∞¶ ‡∞¶‡∞æ‡∞ó‡∞Ç‡∞°‡∞ø"] },
                    { q: "‡∞´‡±à‡∞∞‡±ç ‡∞é‡∞Æ‡∞∞‡±ç‡∞ú‡±Ü‡∞®‡±ç‡∞∏‡±Ä‡∞ï‡∞ø ‡∞è ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç‚Äå‡∞ï‡±Å ‡∞ï‡∞æ‡∞≤‡±ç ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞ø?", a: "101", options: ["100", "101", "108"] },
                    { q: "‡∞™‡±ç‡∞∞‡∞≥‡∞Ø‡∞Ç ‡∞∏‡∞Æ‡∞Ø‡∞Ç‡∞≤‡±ã ‡∞è‡∞Æ‡∞ø ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞ø?", a: "‡∞é‡∞§‡±ç‡∞§‡±à‡∞® ‡∞™‡±ç‡∞∞‡∞¶‡±á‡∞∂‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞µ‡±Ü‡∞≥‡±ç‡∞≤‡∞Ç‡∞°‡∞ø", options: ["‡∞®‡±Ä‡∞ü‡∞ø‡∞≤‡±ã ‡∞à‡∞¶‡∞Ç‡∞°‡∞ø", "‡∞é‡∞§‡±ç‡∞§‡±à‡∞® ‡∞™‡±ç‡∞∞‡∞¶‡±á‡∞∂‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞µ‡±Ü‡∞≥‡±ç‡∞≤‡∞Ç‡∞°‡∞ø", "‡∞¨‡±á‡∞∏‡±ç‚Äå‡∞Æ‡±Ü‡∞Ç‡∞ü‡±ç‚Äå‡∞≤‡±ã ‡∞â‡∞Ç‡∞°‡∞Ç‡∞°‡∞ø"] },
                    { q: "‡∞Æ‡±Ü‡∞∞‡±Å‡∞™‡±Å ‡∞µ‡∞æ‡∞® ‡∞∏‡∞Æ‡∞Ø‡∞Ç‡∞≤‡±ã ‡∞Ö‡∞§‡±ç‡∞Ø‡∞Ç‡∞§ ‡∞∏‡±Å‡∞∞‡∞ï‡±ç‡∞∑‡∞ø‡∞§‡∞Æ‡±à‡∞® ‡∞™‡±ç‡∞∞‡∞¶‡±á‡∞∂‡∞Ç ‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø?", a: "‡∞µ‡∞ø‡∞Ç‡∞°‡±ã‡∞∏‡±ç ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞¶‡±Ç‡∞∞‡∞Ç‡∞ó‡∞æ ‡∞á‡∞Ç‡∞ü‡±ç‡∞≤‡±ã", options: ["‡∞ö‡±Ü‡∞ü‡±ç‡∞ü‡±Å ‡∞ï‡∞ø‡∞Ç‡∞¶", "‡∞µ‡∞ø‡∞Ç‡∞°‡±ã‡∞∏‡±ç ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞¶‡±Ç‡∞∞‡∞Ç‡∞ó‡∞æ ‡∞á‡∞Ç‡∞ü‡±ç‡∞≤‡±ã", "‡∞Ö‡∞°‡±Å‡∞ó‡±Å ‡∞Æ‡±Ä‡∞¶"] },
                    { q: "‡∞ó‡±ç‡∞Ø‡∞æ‡∞∏‡±ç ‡∞µ‡∞æ‡∞∏‡∞® ‡∞µ‡∞∏‡±ç‡∞§‡±á ‡∞è‡∞Æ‡∞ø ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞ø?", a: "‡∞µ‡∞ø‡∞Ç‡∞°‡±ã‡∞∏‡±ç ‡∞§‡±Ü‡∞∞‡∞µ‡∞Ç‡∞°‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞¨‡∞Ø‡∞ü‡∞ï‡±Å ‡∞µ‡±Ü‡∞≥‡±ç‡∞≤‡∞Ç‡∞°‡∞ø", options: ["‡∞Æ‡∞æ‡∞ö‡∞ø‡∞∏‡±ç ‡∞µ‡±Ü‡∞≤‡∞ø‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø", "‡∞µ‡∞ø‡∞Ç‡∞°‡±ã‡∞∏‡±ç ‡∞§‡±Ü‡∞∞‡∞µ‡∞Ç‡∞°‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞¨‡∞Ø‡∞ü‡∞ï‡±Å ‡∞µ‡±Ü‡∞≥‡±ç‡∞≤‡∞Ç‡∞°‡∞ø", "‡∞™‡∞ü‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞ï‡∞Ç‡∞°‡∞ø"] }
                ]
            }
        };

        let currentLanguage = "en";

        // Utility for translation
        function t(key) {
            return translations[currentLanguage][key] || translations["en"][key] || key;
        }

        // --- VOICE SUPPORT ---
        function speak(text) {
            if (!voiceEnabled) return;
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utter = new SpeechSynthesisUtterance(text);
                // Set language for voice
                utter.lang = currentLanguage === "hi" ? "hi-IN"
                    : currentLanguage === "mr" ? "mr-IN"
                    : currentLanguage === "es" ? "es-ES"
                    : currentLanguage === "te" ? "te-IN"
                    : "en-US";
                utter.rate = 1;
                utter.pitch = 1;
                window.speechSynthesis.speak(utter);
            }
        }

        // --- LANGUAGE SWITCH ---
        function setLanguage(lang) {
            currentLanguage = lang;
            updateUITranslations();
            speak(t('home'));
            // If on quiz/game, reload questions in selected language
            if (document.getElementById('quizzes') && !document.getElementById('quizzes').classList.contains('hidden')) {
                startQuiz();
            }
        }

        // --- UPDATE UI TEXT ---
        function updateUITranslations() {
            // Example: update section headings and buttons
            document.querySelectorAll('[data-i18n]').forEach(function(el) {
                const key = el.getAttribute('data-i18n');
                el.textContent = t(key);
            });
            // You can add more UI updates here as needed
        }

        // --- QUIZ ---
        function startQuiz() {
            let questions = shuffle([...translations[currentLanguage].quizQuestions]);
            let score = 0;
            let current = 0;
            showQuestion();

            function showQuestion() {
                if (current >= questions.length) {
                    document.getElementById('quizContent').innerHTML = `
                        <div class="score-badge">
                            <span>üèÖ</span>
                            <div>${t('progress')}: <b>${score}/${questions.length}</b></div>
                        </div>
                    `;
                    return;
                }
                const q = questions[current];
                speak(q.q);
                let html = `<p><b>${q.q}</b></p>`;
                q.options.forEach(function(opt) {
                    html += `<button class="quiz-btn" onclick="window.checkAnswerQuiz('${opt}')">${opt}</button><br>`;
                });
                document.getElementById('quizContent').innerHTML = html;
            }

            window.checkAnswerQuiz = function(selected) {
                const q = questions[current];
                if (selected === q.a) {
                    speak("Correct answer! Well done.");
                } else {
                    speak("Wrong answer. Try again.");
                }
                current++;
                setTimeout(showQuestion, 700);
            };
        }

        // --- NAVIGATION ---
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(function(s) {
                s.classList.add('hidden');
            });
            var section = document.getElementById(sectionId);
            if (section) section.classList.remove('hidden');
            speak(t(sectionId));
            if (sectionId === 'quizzes') {
                startQuiz();
            }
            // ...other section logic...
        }

        // --- DOM READY ---
        document.addEventListener('DOMContentLoaded', function() {
            updateUITranslations();
            speak(t('home'));
        });
    </script>
</body>
</html>